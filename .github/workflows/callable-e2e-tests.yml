name: 'E2E Tests'

on:
  workflow_call:
    secrets:
      GH_ACTIONS:
        required: true

jobs:
  test-job:
    runs-on: ubuntu-latest
    steps:
      - name: test
        run: |
          pwd
          ls -a

    # secrets:
    #   GH_ACTIONS:
    #     required: true
    # inputs:
    #   # package:
    #   #   required: false
    #   #   type: string
    #   test_name:
    #     required: true
    #     type: string
    #   framework:
    #     required: true
    #     type: string
    #   category:
    #     required: true
    #     type: string
    #   sample_name:
    #     required: true
    #     type: string
    #   spec:
    #     # optional - the script will use sample_name by default
    #     type: string
    #     default: ''
    #   browser:
    #     type: string
    #     default: ''
    #   # amplifyjs_dir:
    #   #   # optional - dir to amplify js workspace
    #   #   type: string
    #   #   default: ''



  # e2e-test:
  #   name: Run E2E test
  #   runs-on: ubuntu-latest
  #   steps:
  #     - name: check incoming config
  #       run: |
  #         echo 
  #         ${{ matrix.integ-config.framework }} \
  #         ${{ matrix.integ-config.category }} \
  #         ${{ matrix.integ-config.sample_name }} \
  #         ${{ matrix.integ-config.spec }} \
  #         ${{ matrix.integ-config.browser }} \

  #     - name: Checkout staging repo
  #       uses: actions/checkout@24cb9080177205b6e8c946b17badbe402adc938f
  #       with:
  #         repository: yingku/amplify-js-samples-staging
  #         path: aws-amplify-staging
  #         token: ${{ secrets.GH_ACTIONS }}

  #     - name: Set up Node
  #       uses: actions/setup-node@64ed1c7eab4cce3362f8c340dee64e5eaeef8f7c        
  #       with:
  #         node-version: 16
  #       env:
  #         SEGMENT_DOWNLOAD_TIMEOUT_MINS: 50

  #     - name: run the integ test
  #       run: |
  #         yarn ci:test \
  #         ${{ matrix.integ-config.framework }} \
  #         ${{ matrix.integ-config.category }} \
  #         ${{ matrix.integ-config.sample_name }} \
  #         ${{ matrix.integ-config.spec }} \
  #         ${{ matrix.integ-config.browser }} \
  #       working-directory: ./aws-amplify-staging



  #     # - name: Install ${{ inputs.test_name }} >> sample
  #     #   run: |
  #     #     echo "Current NPM registry: " $(yarn config get registry)
  #     #     ~/amplify-js/.circleci/retry-yarn-script.sh -s 'install' -n 3

  #     # - name: Run cypress tests for ${{ inputs.test_name }} sample on dev
  #     #   run: |
  #     #     cd ~/amplify-js-samples-staging
  #     #     ~/amplify-js/.circleci/retry-yarn-script.sh -s \
  #     #     'ci:test ${{ inputs.framework }} \
  #     #     ${{ inputs.category }} \
  #     #     ${{ inputs.sample_name }} \
  #     #     ${{ inputs.spec }} \
  #     #     ${{ inputs.browser }} \
  #     #     dev \
  #     #     ${{ inputs.amplifyjs_dir }}' -n 3

  #     # - name: Run cypress tests for ${{ inputs.test_name }} sample on prod
  #     #   run: |
  #     #     cd ~/amplify-js-samples-staging

  #     #     ~/amplify-js/.circleci/retry-yarn-script.sh -s \
  #     #     'ci:test ${{ inputs.framework }} \
  #     #     ${{ inputs.category }} \
  #     #     ${{ inputs.sample_name }} \
  #     #     ${{ inputs.spec }} \
  #     #     ${{ inputs.browser }} \
  #     #     prod \
  #     #     ${{ inputs.amplifyjs_dir }}' -n 3

  #     # - uses: actions/upload-artifact@0b7f8abb1508181956e8e162db84b466c27e18ce # v3.1.2 https://github.com/actions/upload-artifact/commit/0b7f8abb1508181956e8e162db84b466c27e18ce
  #     #   with:
  #     #     name: my-artifact
  #     #     path: |
  #     #       ~/amplify-js-samples-staging/cypress/videos
  #     #       ~/amplify-js-samples-staging/cypress/screenshots

